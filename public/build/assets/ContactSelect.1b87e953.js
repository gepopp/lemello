import{d as u,K as N,o as l,e as d,a as e,b as V,g as p,M as x,t as s,f as C,x as D,F,h as K,n as w,i as c}from"./app.2c36719f.js";import{_ as I}from"./Input.5c9e32fe.js";const L={key:0},O={class:"relative"},S=["textContent"],E={key:1,class:"absolute bg-white shadow-2xl border border-gray-100 w-full p-2 z-50"},H=["onClick","onMouseover"],P=["textContent"],T={class:"text-xs font-thin"},q=["textContent"],A=c(", "),G=["textContent"],J=c(),Q=["textContent"],R={key:1},U={class:"border border-gray-400 p-2 hover:bg-gray-200 flex justify-between"},W=["textContent"],X={key:0,class:"text-xs font-thin"},Y=["textContent"],Z=c(", "),ee=["textContent"],te=c(),se=["textContent"],oe=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),ne=[oe],le={__name:"ContactSelect",props:{contact:Object,address:{type:Boolean,default:!0},filter:{type:Object,default:{}}},emits:["remove","set"],setup(v,{expose:$,emit:m}){const g=v,b=u(""),o=u(g.contact),n=u([]),t=u(0),f=usePage().props.value.errors,B=_.debounce(i=>{axios.get(route("customer.search",{search:i.target.value,...g.filter})).then(a=>{n.value=a.data})},500),M=()=>{h(),m("remove")},y=i=>{o.value=i,b.value="",n.value=[],m("set",i)},h=()=>{o.value=null,b.value="",n.value=[]};return $({attached:o,reset:h}),(i,a)=>{const j=N("click-outside");return o.value?(l(),d("div",R,[e("div",U,[e("div",null,[e("p",{textContent:s(o.value.name)},null,8,W),v.address?(l(),d("p",X,[e("span",{textContent:s(o.value.address.line_1)},null,8,Y),Z,e("span",{textContent:s(o.value.address.zip)},null,8,ee),te,e("span",{textContent:s(o.value.address.city)},null,8,se)])):C("",!0)]),e("div",{class:"text-red-500 cursor-pointer",onClick:M},[(l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:w(["mr-5 h-full w-auto",v.address?"p-2":""])},ne,2))])])])):(l(),d("div",L,[e("div",O,[V(I,{id:"search",onInput:p(B),class:"mt-1 block w-full",type:"text",onKeydown:[a[0]||(a[0]=x(r=>t.value<n.value.length-1?t.value++:t.value=0,["down"])),a[1]||(a[1]=x(r=>t.value>0?t.value--:t.value=n.value.length-1,["up"])),a[2]||(a[2]=x(r=>y(n.value[t.value]),["enter"]))]},null,8,["onInput"]),p(f).contact_id?(l(),d("p",{key:0,class:"text-xs text-red-500",textContent:s(p(f).contact_id)},null,8,S)):C("",!0),n.value.length?D((l(),d("div",E,[(l(!0),d(F,null,K(n.value,(r,k)=>(l(),d("div",{onClick:z=>y(r),onMouseover:z=>t.value=k,class:w(["border border-gray-400 p-2 cursor-pointer mb-2",t.value==k?"bg-gray-200 border-2 border-orange-600":""])},[e("p",{textContent:s(r.name)},null,8,P),e("p",T,[e("span",{textContent:s(r.address.line_1)},null,8,q),A,e("span",{textContent:s(r.address.zip)},null,8,G),J,e("span",{textContent:s(r.address.city)},null,8,Q)])],42,H))),256))])),[[j,h]]):C("",!0)])]))}}};export{le as _};
