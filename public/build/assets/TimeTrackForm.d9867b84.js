import{d as y,k,l as M,u as N,o as u,e as m,a as s,b as r,w as c,i as p,t as l,g as o,f as T,n as f,x as _,N as v,T as F,O as I,p as S}from"./app.194e13a5.js";import{_ as g}from"./Label.ca964c17.js";import{_ as U}from"./Seperator.7f914c29.js";import{_ as Y}from"./Button.a657cf0b.js";import{_ as B}from"./Input.9f87bfde.js";const j=["onSubmit"],O={class:"my-2 flex-auto basis-0"},P={key:0,class:"my-2 flex-auto basis-0"},z={class:"my-2 flex-auto basis-0"},E={class:"block font-medium text-sm text-gray-700 mb-1"},R=p(" / "),q={key:1,class:"grid grid-cols-2 gep-x-3"},A={class:"relative"},G=s("p",{class:"absolute top-0 ml-1 text-xxs"},"From:",-1),J={class:"relative"},K=s("p",{class:"absolute top-0 ml-1 text-xxs"},"To:",-1),L={class:"my-2 flex-auto basis-0"},Q=s("span",{class:"text-red-500"},"*",-1),W={class:"relative overflow-hidden"},X=["textContent"],Z={class:"col-span-4 flex justify-end mt-5 w-full"},ne={__name:"TimeTrackForm",props:{contact_id:{type:Number,default:null}},emits:["saved"],setup(V,{emit:H}){const w=V,i=y("duration"),b=y(),x=y(),d=k(()=>M().props.value.errors);k(()=>Object.keys(d.value).length>0);const a=N({contact_id:w.contact_id,duration:"",note:"",created_at:moment().format("YYYY-MM-DDTHH:mm")}),$=()=>{a.post(route("timetrack.store"),{onSuccess:()=>{H("saved"),a.reset()}})},h=()=>{var n=moment(b.value,"HH:mm"),e=moment(x.value,"HH:mm"),t=moment.duration(e.diff(n)),C=parseInt(t.asHours())<10?"0"+parseInt(t.asHours()):parseInt(t.asHours()),D=parseInt(t.asMinutes())%60<10?"0"+parseInt(t.asMinutes())%60:parseInt(t.asMinutes())%60;a.duration=C+":"+D,i.value="duration"};return(n,e)=>(u(),m("form",{onSubmit:S($,["prevent"])},[s("div",I({class:"flex space-x-5 w-full"},n.$attrs),[s("div",O,[r(g,{class:"mb-1"},{default:c(()=>[p(l(n.__("Date")),1)]),_:1}),r(B,{id:"created_at",name:"created_at",modelValue:o(a).created_at,"onUpdate:modelValue":e[0]||(e[0]=t=>o(a).created_at=t),type:"datetime-local",class:"border-gray-300 focus:border-orange-300 focus:border-2 focus:ring-0 focus:outline-none focus:shadow-none shadow-sm mt-1 block w-full"},null,8,["modelValue"])]),w.contact_id===null?(u(),m("div",P,[r(g,{class:"mb-1"},{default:c(()=>[p(l(n.__("Select Customer")),1)]),_:1}),r(U,{contact:null,form:o(a),onRemove:e[1]||(e[1]=t=>o(a).contact_id=null),onSet:e[2]||(e[2]=t=>o(a).contact_id=t.id),address:!1},null,8,["form"])])):T("",!0),s("div",z,[s("label",E,[s("span",{class:f(["cursor-pointer",i.value=="duration"?"text-orange-500 underline":""]),onClick:e[3]||(e[3]=t=>i.value="duration")},l(n.__("Duration")),3),R,s("span",{class:f(["cursor-pointer",i.value!="duration"?"text-orange-500 underline":""]),onClick:e[4]||(e[4]=t=>i.value="span")},l(n.__("From - To")),3)]),i.value=="duration"?_((u(),m("input",{key:0,id:"duration",type:"time","onUpdate:modelValue":e[5]||(e[5]=t=>o(a).duration=t),class:"w-full border-gray-300"},null,512)),[[v,o(a).duration]]):(u(),m("div",q,[s("div",A,[_(s("input",{type:"time",class:"w-full border-gray-300","onUpdate:modelValue":e[6]||(e[6]=t=>b.value=t)},null,512),[[v,b.value]]),G]),s("div",J,[_(s("input",{type:"time",class:"w-full border-gray-300","onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),onFocusout:h},null,544),[[v,x.value]]),K])]))]),s("div",L,[r(g,{for:"note"},{default:c(()=>[p(l(n.__("Note")),1),Q]),_:1}),s("div",W,[_(s("textarea",{rows:"1",id:"name","onUpdate:modelValue":e[8]||(e[8]=t=>o(a).note=t),class:f(["border-gray-300 focus:border-orange-300 focus:border-2 focus:ring-0 focus:outline-none focus:shadow-none shadow-sm mt-1 block w-full",o(d).note?"border-2 border-red-500":""]),onFocus:e[9]||(e[9]=t=>delete o(d).note)},null,34),[[v,o(a).note]]),r(F,{name:"error"},{default:c(()=>[o(d).note?(u(),m("p",{key:0,class:"absolute left-0 bottom-0 text-red-600 text-xxs ml-3 line-clamp-1 hover:line-clamp-3",textContent:l(o(d).note)},null,8,X)):T("",!0)]),_:1})])])],16),s("div",Z,[r(Y,{class:f({"opacity-25":o(a).processing}),disabled:o(a).processing},{default:c(()=>[p(l(n.__("save")),1)]),_:1},8,["class","disabled"])])],40,j))}};export{ne as _};
