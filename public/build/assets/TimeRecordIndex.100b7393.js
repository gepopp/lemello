import{d as f,k as T,q as L,u as V,m as $,o as r,c as k,w as _,a as t,t as o,b as i,i as h,g as n,x as B,M as H,n as b,e as d,f as C,T as R,p as S,h as M,F as g,l as j}from"./app.542b9e37.js";import{_ as x}from"./Label.0f926337.js";import{_ as N}from"./ContactSelect.d2e94fad.js";import{S as q}from"./Seperator.84ac47fd.js";import{_ as z}from"./AppLayout.9e5c9227.js";import{_ as I}from"./FromField.dc24f6cc.js";import{_ as P}from"./Button.60c133c7.js";import"./Input.9968d265.js";import"./_plugin-vue_export-helper.cdc0426e.js";const A={class:"font-semibold text-xl text-gray-800 leading-tight"},E=["onSubmit"],O={class:"grid grid-cols-1 md:grid-cols-3 md:gap-x-10"},U={class:"my-2"},G={class:"my-2"},J=t("span",{class:"text-red-500"},"*",-1),K={class:"relative overflow-hidden"},Q=["textContent"],W={class:"flex justify-end mt-5 w-full"},X={class:"my-2"},Y={class:"table-auto w-full"},Z={class:"text-xs font-thin"},tt={class:"text-right"},et={class:"text-right"},st={class:"text-xs font-thin"},ot={class:"text-xs font-thin"},lt={class:"text-right"},nt={class:"text-xs font-thin"},at={class:"text-xs font-thin"},rt={class:"text-right"},it={class:"text-xs font-thin"},dt={class:"text-xs font-thin"},ut={colspan:"5"},_t={class:"flex justify-between"},ct={key:0},mt={class:"flex flex-wrap -mb-1"},ft=["innerHTML"],pt=["onClick","innerHTML"],Mt={__name:"TimeRecordIndex",props:{sum:String,count:Number},setup(vt){f();const w=f({}),c=f({}),m=T(()=>j().props.value.errors);T(()=>Object.keys(m.value).length>0),L(()=>v());const a=V({contact_id:null,duration:"",note:""}),u=f(0),p=f(!1),v=()=>{axios.get(route("timetrack.loadIndex",{page:u.value,customer_id:p.value})).then(e=>{w.value=e.data.data,c.value=e.data.links})},D=()=>{a.post(route("timetrack.store"),{onSuccess:()=>{v(),a.reset()}})},F=e=>{e===0&&u.value>1?u.value--:e===c.value.length-1&&u.value<c.value.length-1?u.value++:e!==0&&e!==c.value.length-1&&(u.value=e)};return $(()=>u.value,e=>v()),$(()=>p.value,e=>v()),(e,l)=>(r(),k(z,{title:e.__("Timetrack")},{header:_(()=>[t("h2",A,o(e.__("Timetrack")),1)]),default:_(()=>[t("form",{onSubmit:S(D,["prevent"])},[t("div",O,[t("div",U,[i(x,{class:"mb-1"},{default:_(()=>[h(o(e.__("Select Customer")),1)]),_:1}),i(N,{contact:null,form:n(a),onRemove:l[0]||(l[0]=s=>n(a).contact_id=null),onSet:l[1]||(l[1]=s=>n(a).contact_id=s.id),address:!1},null,8,["form"])]),i(I,{form:n(a),id:"duration",label:e.__("Duration"),type:"time",required:!0},null,8,["form","label"]),t("div",G,[i(x,{for:"note"},{default:_(()=>[h(o(e.__("Note")),1),J]),_:1}),t("div",K,[B(t("textarea",{id:"name","onUpdate:modelValue":l[2]||(l[2]=s=>n(a).note=s),class:b(["border-gray-300 focus:border-orange-300 focus:border-2 focus:ring-0 focus:outline-none focus:shadow-none shadow-sm mt-1 block w-full",n(m).note?"border-2 border-red-500":""]),onFocus:l[3]||(l[3]=s=>delete n(m).note)},null,34),[[H,n(a).note]]),i(R,{name:"error"},{default:_(()=>[n(m).note?(r(),d("p",{key:0,class:"absolute left-0 bottom-0 text-red-600 text-xxs ml-3 line-clamp-1 hover:line-clamp-3",textContent:o(n(m).note)},null,8,Q)):C("",!0)]),_:1})])])]),t("div",W,[i(P,{class:b({"opacity-25":n(a).processing}),disabled:n(a).processing},{default:_(()=>[h(o(e.__("save")),1)]),_:1},8,["class","disabled"])])],40,E),i(q),t("div",X,[i(x,{class:"mb-1"},{default:_(()=>[h(o(e.__("Filter")),1)]),_:1}),i(N,{contact:null,form:n(a),filter:{tracks:!0},onRemove:l[4]||(l[4]=s=>p.value=0),onSet:l[5]||(l[5]=s=>p.value=s.id),address:!1},null,8,["form"])]),t("table",Y,[t("thead",null,[t("tr",null,[t("th",null,o(e.__("Am")),1),t("th",null,o(e.__("Customer")),1),t("th",null,[t("p",null,o(e.__("Duration")),1),t("p",Z,o(e.__("in Dezimal")),1)]),t("th",tt,o(e.__("Rate")),1),t("th",et,o(e.__("Netto")),1)])]),t("tbody",null,[(r(!0),d(g,null,M(w.value,s=>(r(),d("tr",{onClick:l[6]||(l[6]=S(y=>e.$inertia.visit(e.route("contact.show",e.contact)),["prevent"]))},[t("td",null,o(s.created),1),t("td",null,[t("p",null,o(s.customer),1),t("p",st,o(s.address),1)]),t("td",null,[t("p",null,o(s.duration),1),t("p",ot,o(s.duration_float),1)]),t("td",lt,[t("p",null,o(s.rate),1),t("p",nt,o(s.rate_vat),1),t("p",at,o(s.rate_btto),1)]),t("td",rt,[t("p",null,o(s.netto),1),t("p",it,o(s.vat),1),t("p",dt,o(s.brutto),1)])]))),256))]),t("tfoot",null,[t("tr",null,[t("td",ut,[t("div",_t,[c.value.length>3?(r(),d("div",ct,[t("div",mt,[(r(!0),d(g,null,M(c.value,(s,y)=>(r(),d(g,null,[s.url===null?(r(),d("div",{key:0,class:"mb-1 mr-1 px-4 py-3 text-gray-400 text-sm leading-4 border",innerHTML:s.label},null,8,ft)):(r(),d("div",{key:1,onClick:ht=>F(y),class:b(["mb-1 mr-1 px-4 py-3 focus:text-indigo-500 text-sm leading-4 hover:bg-white border focus:border-orange-500 cursor-pointer",{"text-orange-500 font-bold":s.active}]),innerHTML:s.label},null,10,pt))],64))),256))])])):C("",!0)])])])])])]),_:1},8,["title"]))}};export{Mt as default};
